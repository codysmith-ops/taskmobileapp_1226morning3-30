# üéØ iOS Build Errors - Quick Reference

## ‚úÖ What Was Fixed Automatically

### 1. RCTBridgeDelegate Protocol Error - **FIXED**
**File:** `RCTAppDelegate.h`

**Error:**
```
warning: Cannot find protocol definition for 'RCTBridgeDelegate'
```

**Fix Applied:**
- Changed from forward declaration to proper import
- `@protocol RCTBridgeDelegate;` ‚Üí `#import <React/RCTBridgeDelegate.h>`

**Status:** ‚úÖ Complete - No action needed

---

## üõ†Ô∏è What You Need To Fix

### 2. Sandbox/Rsync Permission Errors - **ACTION REQUIRED**

**Errors:**
```
error: Sandbox: rsync deny(1) file-read-data
error: rsync: mkstempat: Operation not permitted
error: rsync: utimensat: No such file or directory
```

**Root Cause:**
- Xcode's User Script Sandboxing prevents access to Hermes framework
- Build scripts can't copy XCFramework files during build

**Solution (Choose One):**

#### Option A: Run Quick Fix Script (Recommended)
```bash
chmod +x quick_fix.sh
./quick_fix.sh
```

#### Option B: Manual Fix
1. Open `ios/Podfile`
2. Add to your `post_install` hook:
   ```ruby
   post_install do |installer|
     installer.pods_project.targets.each do |target|
       target.build_configurations.each do |config|
         config.build_settings['ENABLE_USER_SCRIPT_SANDBOXING'] = 'NO'
       end
     end
   end
   ```
3. Run: `cd ios && pod install && cd ..`
4. Clean and rebuild in Xcode

**Status:** ‚ö†Ô∏è Requires your action

---

### 3. Duplicate -lc++ Warning - **MINOR**

**Warning:**
```
warning: Ignoring duplicate libraries: '-lc++'
```

**Impact:** 
- Cosmetic only - doesn't prevent building
- May slightly increase link time

**Solution:**
```bash
chmod +x fix_duplicate_lc++.sh
./fix_duplicate_lc++.sh
```

**Or manually:**
1. Open Xcode ‚Üí Your Target ‚Üí Build Settings
2. Search: "Other Linker Flags"
3. Remove duplicate `-lc++` entries (keep only one or remove all)

**Status:** üü° Optional fix

---

### 4. Missing Metal Toolchain Path - **IGNORE**

**Warning:**
```
warning: Search path '/var/run/com.apple.security.cryptexd/.../Metal.xctoolchain/...' not found
```

**Impact:**
- None - this is a system path that's not always present
- Doesn't affect your build

**Solution:**
- Ignore it completely, or
- Remove the path from Build Settings ‚Üí Library Search Paths if you want to suppress the warning

**Status:** ‚ÑπÔ∏è Safe to ignore

---

## üöÄ Quick Start Guide

### If you want the fastest fix:

```bash
# 1. Make script executable
chmod +x quick_fix.sh

# 2. Run it
./quick_fix.sh

# 3. When it completes, open Xcode
open ios/*.xcworkspace

# 4. Clean: Cmd+Shift+K
# 5. Build: Cmd+B
```

### If you prefer the complete fix:

```bash
# Run the comprehensive script
chmod +x fix_all_build_issues.sh
./fix_all_build_issues.sh
```

---

## üìã Checklist

Before building, ensure:

- [ ] Xcode is closed
- [ ] You've run one of the fix scripts
- [ ] Or you've manually updated Podfile with sandboxing fix
- [ ] Run `cd ios && pod install && cd ..`
- [ ] Open `.xcworkspace` (not `.xcodeproj`)
- [ ] Clean build folder (‚áß‚åòK)
- [ ] Build (‚åòB)

---

## üéØ Priority Order

Fix in this order:

1. **HIGH:** Sandbox/rsync errors (prevents building)
   - Run `quick_fix.sh` or update Podfile manually
   
2. **LOW:** Duplicate -lc++ warning (cosmetic)
   - Run `fix_duplicate_lc++.sh` if desired
   
3. **IGNORE:** Metal toolchain warning
   - No action needed

---

## üìö Additional Resources

- **Full guide:** `FIX_BUILD_ERRORS.md` (comprehensive troubleshooting)
- **Podfile config:** `podfile_configuration.rb` (recommended settings)
- **Quick fix:** `quick_fix.sh` (automated clean + reinstall)
- **Full fix:** `fix_all_build_issues.sh` (comprehensive cleanup)
- **-lc++ fix:** `fix_duplicate_lc++.sh` (linker flag fixer)

---

## ‚ùì Still Having Issues?

### Check these common problems:

1. **Using .xcodeproj instead of .xcworkspace**
   - Always use: `open ios/*.xcworkspace`

2. **CocoaPods not installed**
   - Install: `sudo gem install cocoapods`

3. **Wrong directory**
   - Must run from project root (where package.json is)

4. **Xcode version too old**
   - React Native requires Xcode 13+ (15+ recommended)

5. **Permissions issues**
   - Grant Full Disk Access to Terminal and Xcode
   - System Settings ‚Üí Privacy & Security ‚Üí Full Disk Access

---

## üÜò Emergency Reset

If nothing works:

```bash
# Nuclear option - complete reset
rm -rf ~/Library/Developer/Xcode/DerivedData
rm -rf ios/build ios/Pods ios/Podfile.lock
rm -rf node_modules package-lock.json
npm cache clean --force

# Reinstall everything
npm install
cd ios && pod install && cd ..

# Restart Mac (sometimes necessary)
sudo reboot
```

---

## ‚ú® Success Indicators

Your build is fixed when:

- ‚úÖ Build completes in Xcode
- ‚úÖ No sandbox/rsync errors in build log
- ‚úÖ No "Cannot find protocol definition" warnings
- ‚úÖ App runs on simulator/device
- ‚úÖ Metro bundler connects properly

---

## üìä Error Summary

| Error Type | Severity | Fixed? | Action |
|------------|----------|--------|--------|
| RCTBridgeDelegate protocol | High | ‚úÖ Yes | None - auto fixed |
| Sandbox/rsync errors | High | ‚ö†Ô∏è No | Run quick_fix.sh |
| Duplicate -lc++ | Low | ‚ö†Ô∏è No | Optional: run fix script |
| Metal toolchain | None | ‚ÑπÔ∏è N/A | Ignore completely |

---

**Generated:** December 28, 2025  
**Your Project:** MobileTodoList iOS  
**Platform:** iOS (Simulator)

---

## üí° Pro Tips

1. **Always clean before building after dependency changes**
   - Product ‚Üí Clean Build Folder (‚áß‚åòK)

2. **Delete DerivedData when switching branches**
   ```bash
   rm -rf ~/Library/Developer/Xcode/DerivedData
   ```

3. **Keep dependencies updated**
   ```bash
   npm update
   cd ios && pod update && cd ..
   ```

4. **Use .xcworkspace, not .xcodeproj**
   - After running `pod install`, always use the workspace file

5. **Check Metro bundler is running**
   ```bash
   npx react-native start
   ```

---

**Need help?** Check `FIX_BUILD_ERRORS.md` for detailed troubleshooting.
